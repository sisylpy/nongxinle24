<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.nongxinle.dao.GbDistributerGoodsShelfDao">

	<select id="queryObject" resultType="com.nongxinle.entity.GbDistributerGoodsShelfEntity">
		select * from gb_distributer_goods_shelf where gb_distributer_goods_shelf_id = #{value}
	</select>

	<select id="queryList" resultType="com.nongxinle.entity.GbDistributerGoodsShelfEntity">
		select * from gb_distributer_goods_shelf 
		<if test="offset != null and limit != null">
			limit #{offset}, #{limit}
		</if>
	</select>
	
 	<select id="queryTotal" resultType="int">
		select count(*) from gb_distributer_goods_shelf 
	</select>


	<select id="queryShelfByParamsWithStock" resultMap="shelfDetailWithOrder">
		select * from gb_distributer_goods_shelf as gs
		left join gb_distributer_goods_shelf_goods as gsg on gsg.gb_DGSG_shelf_id = gs.gb_distributer_goods_shelf_id
		left join gb_distributer_goods as dg on dg.gb_distributer_goods_id = gsg.gb_DGSG_dis_goods_id
		 left join gb_distributer_standard as gds on gds.gb_DS_dis_goods_id = dg.gb_distributer_goods_id
		left join gb_department_orders as gdo on gdo.gb_DO_department_id = #{depId}
		   and gdo.gb_DO_dis_goods_id = dg.gb_distributer_goods_id and gdo.gb_DO_status &lt; 3 and gdo.gb_DO_department_id = #{depId}
		left join gb_department_goods_stock as gdgs on gdgs.gb_dgs_gb_dis_goods_id = dg.gb_distributer_goods_id
		 and gdgs.gb_dgs_rest_weight > 0 and gdgs.gb_dgs_gb_department_id = #{depId}
		left join gb_department_dis_goods ddg on ddg.gb_DDG_dis_goods_id = dg.gb_distributer_goods_id

		<where>
			<if test="shelfId !=null">
				and gb_distributer_goods_shelf_id = #{shelfId}
			</if>
			<if test="disId != null">
				and gb_distributer_goods_shelf_dis_id = #{disId}
			</if>
			<if test="depId != null">
				and gb_distributer_goods_shelf_dep_id = #{depId}
			</if>

		</where>
		order by gs.gb_distributer_goods_shelf_sort, gsg.gb_DGSG_sort, gdgs.gb_dgs_full_time
	</select>


	<resultMap id="disStandards" type="GbDistributerStandardEntity">
		<id property="gbDistributerStandardId" column="gb_distributer_standard_id"/>
		<result property="gbDsStandardName" column="gb_DS_standard_name"/>
		<result property="gbDsStandardScale" column="gb_DS_standard_scale"/>
		<result property="gbDsDisGoodsId" column="gb_DS_dis_goods_id"/>
	</resultMap>


	<resultMap id="disGoodsWithOrder" type="GbDistributerGoodsEntity">
		<id property="gbDistributerGoodsId" column="gb_distributer_goods_id"/>
		<result property="gbDgGbDepartmentId" column="gb_dg_gb_department_id"/>
		<result property="gbDgGoodsIsHidden" column="gb_dg_goods_is_hidden"/>
		<result property="gbDgGoodsSonsSort" column="gb_dg_goods_sons_sort"/>
		<result property="gbDgSellingPrice" column="gb_dg_selling_price"/>
		<result property="gbDgGoodsName" column="gb_dg_goods_name"/>
		<result property="gbDgGoodsStandardname" column="gb_dg_goods_standardname"/>
		<result property="gbDgGoodsDetail" column="gb_dg_goods_detail"/>
		<result property="gbDgGoodsPlace" column="gb_dg_goods_place"/>
		<result property="gbDgGoodsBrand" column="gb_dg_goods_brand"/>
		<result property="gbDgPullOff" column="gb_dg_pull_off"/>
		<result property="gbDgGoodsIsWeight" column="gb_dg_goods_is_weight"/>
		<result property="gbDgDfgGoodsFatherId" column="gb_dg_dfg_goods_father_id"/>
		<result property="gbDgNxDistributerId" column="gb_dg_gb_distributer_id"/>
		<result property="gbDgNxDistributerGoodsId" column="gb_dg_gb_distributer_goods_id"/>
		<result property="gbDgGbDepartmentId" column="gb_dg_gb_department_id"/>
		<result property="gbDgGbSupplierId" column="gb_dg_gb_supplier_id"/>
		<result property="gbDgGoodsStandardWeight" column="gb_dg_goods_standard_weight"/>
		<result property="gbDgGoodsStatus" column="gb_dg_goods_status"/>
		<result property="gbDgGoodsType" column="gb_dg_goods_type"/>
		<result property="gbDgGbDepartmentId" column="gb_dg_gb_department_id"/>
		<result property="gbDgGbSupplierId" column="gb_dg_gb_supplier_id"/>
		<result property="gbDgNxDistributerId" column="gb_dg_nx_distributer_id"/>
		<result property="gbDgNxDistributerGoodsId" column="gb_dg_nx_distributer_goods_id"/>
		<result property="gbDgGoodsPrice" column="gb_dg_goods_price"/>
		<result property="gbDgGoodsLowestPrice" column="gb_dg_goods_lowest_price"/>
		<result property="gbDgGoodsHighestPrice" column="gb_dg_goods_highest_price"/>
		<result property="gbDgControlPrice" column="gb_dg_control_price"/>
		<result property="gbDgControlFresh" column="gb_dg_control_fresh"/>
		<result property="gbDgFreshWarnHour" column="gb_dg_fresh_warn_hour"/>
		<result property="gbDgFreshWasteHour" column="gb_dg_fresh_waste_hour"/>
		<result property="gbDgGoodsInventoryType" column="gb_dg_goods_inventory_type"/>
		<result property="gbDgGoodsType" column="gb_dg_goods_type"/>
		<result property="gbDgGbSupplierId" column="gb_dg_gb_supplier_id"/>
		<result property="gbDgIsFranchisePrice" column="gb_dg_is_franchise_price"/>
		<result property="gbDgFranchisePriceOne" column="gb_dg_franchise_price_one"/>
		<result property="gbDgFranchisePriceOneUpdate" column="gb_dg_franchise_price_one_update"/>
		<result property="gbDgFranchisePriceTwo" column="gb_dg_franchise_price_two"/>
		<result property="gbDgFranchisePriceTwoUpdate" column="gb_dg_franchise_price_two_update"/>
		<result property="gbDgFranchisePriceThree" column="gb_dg_franchise_price_three"/>
		<result property="gbDgFranchisePriceThreeUpdate" column="gb_dg_franchise_price_three_update"/>
		<result property="gbDgIsSelfControl" column="gb_dg_is_self_control"/>
		<result property="gbDgSelfPrice" column="gb_dg_self_price"/>
		<association property="gbDepartmentOrdersEntity" resultMap="orders"/>
		<collection property="gbDistributerStandardEntities" resultMap="disStandards"/>
	</resultMap>

	<resultMap id="disGoods" type="GbDistributerGoodsEntity">
		<id property="gbDistributerGoodsId" column="gb_distributer_goods_id"/>
		<result property="gbDgGbDepartmentId" column="gb_dg_gb_department_id"/>
		<result property="gbDgGoodsIsHidden" column="gb_dg_goods_is_hidden"/>
		<result property="gbDgGoodsSonsSort" column="gb_dg_goods_sons_sort"/>
		<result property="gbDgSellingPrice" column="gb_dg_selling_price"/>
		<result property="gbDgGoodsName" column="gb_dg_goods_name"/>
		<result property="gbDgGoodsStandardname" column="gb_dg_goods_standardname"/>
		<result property="gbDgGoodsDetail" column="gb_dg_goods_detail"/>
		<result property="gbDgGoodsPlace" column="gb_dg_goods_place"/>
		<result property="gbDgGoodsBrand" column="gb_dg_goods_brand"/>
		<result property="gbDgPullOff" column="gb_dg_pull_off"/>
		<result property="gbDgGoodsIsWeight" column="gb_dg_goods_is_weight"/>
		<result property="gbDgDfgGoodsFatherId" column="gb_dg_dfg_goods_father_id"/>
		<result property="gbDgNxDistributerId" column="gb_dg_gb_distributer_id"/>
		<result property="gbDgNxDistributerGoodsId" column="gb_dg_gb_distributer_goods_id"/>
		<result property="gbDgGbDepartmentId" column="gb_dg_gb_department_id"/>
		<result property="gbDgGbSupplierId" column="gb_dg_gb_supplier_id"/>
		<result property="gbDgGoodsStandardWeight" column="gb_dg_goods_standard_weight"/>
		<result property="gbDgGoodsStatus" column="gb_dg_goods_status"/>
		<result property="gbDgGoodsType" column="gb_dg_goods_type"/>
		<result property="gbDgGbDepartmentId" column="gb_dg_gb_department_id"/>
		<result property="gbDgGbSupplierId" column="gb_dg_gb_supplier_id"/>
		<result property="gbDgNxDistributerId" column="gb_dg_nx_distributer_id"/>
		<result property="gbDgNxDistributerGoodsId" column="gb_dg_nx_distributer_goods_id"/>
		<result property="gbDgGoodsPrice" column="gb_dg_goods_price"/>
		<result property="gbDgGoodsLowestPrice" column="gb_dg_goods_lowest_price"/>
		<result property="gbDgGoodsHighestPrice" column="gb_dg_goods_highest_price"/>
		<result property="gbDgControlPrice" column="gb_dg_control_price"/>
		<result property="gbDgControlFresh" column="gb_dg_control_fresh"/>
		<result property="gbDgFreshWarnHour" column="gb_dg_fresh_warn_hour"/>
		<result property="gbDgFreshWasteHour" column="gb_dg_fresh_waste_hour"/>
		<result property="gbDgGoodsInventoryType" column="gb_dg_goods_inventory_type"/>
		<result property="gbDgGoodsType" column="gb_dg_goods_type"/>
		<result property="gbDgGbSupplierId" column="gb_dg_gb_supplier_id"/>
		<result property="gbDgIsFranchisePrice" column="gb_dg_is_franchise_price"/>
		<result property="gbDgFranchisePriceOne" column="gb_dg_franchise_price_one"/>
		<result property="gbDgFranchisePriceOneUpdate" column="gb_dg_franchise_price_one_update"/>
		<result property="gbDgFranchisePriceTwo" column="gb_dg_franchise_price_two"/>
		<result property="gbDgFranchisePriceTwoUpdate" column="gb_dg_franchise_price_two_update"/>
		<result property="gbDgFranchisePriceThree" column="gb_dg_franchise_price_three"/>
		<result property="gbDgFranchisePriceThreeUpdate" column="gb_dg_franchise_price_three_update"/>
		<result property="gbDgIsSelfControl" column="gb_dg_is_self_control"/>
		<result property="gbDgSelfPrice" column="gb_dg_self_price"/>
		<collection property="gbDepartmentOrdersEntities" resultMap="orders"/>
		<collection property="gbDistributerStandardEntities" resultMap="disStandards"/>
	</resultMap>

	<resultMap id="disGoodsWithDepGoods" type="GbDistributerGoodsEntity">
		<id property="gbDistributerGoodsId" column="gb_distributer_goods_id"/>
		<result property="gbDgGbDepartmentId" column="gb_dg_gb_department_id"/>
		<result property="gbDgGoodsIsHidden" column="gb_dg_goods_is_hidden"/>
		<result property="gbDgGoodsSonsSort" column="gb_dg_goods_sons_sort"/>
		<result property="gbDgSellingPrice" column="gb_dg_selling_price"/>
		<result property="gbDgGoodsName" column="gb_dg_goods_name"/>
		<result property="gbDgGoodsStandardname" column="gb_dg_goods_standardname"/>
		<result property="gbDgGoodsDetail" column="gb_dg_goods_detail"/>
		<result property="gbDgGoodsPlace" column="gb_dg_goods_place"/>
		<result property="gbDgGoodsBrand" column="gb_dg_goods_brand"/>
		<result property="gbDgPullOff" column="gb_dg_pull_off"/>
		<result property="gbDgGoodsIsWeight" column="gb_dg_goods_is_weight"/>
		<result property="gbDgDfgGoodsFatherId" column="gb_dg_dfg_goods_father_id"/>
		<result property="gbDgNxDistributerId" column="gb_dg_gb_distributer_id"/>
		<result property="gbDgNxDistributerGoodsId" column="gb_dg_gb_distributer_goods_id"/>
		<result property="gbDgGbDepartmentId" column="gb_dg_gb_department_id"/>
		<result property="gbDgGbSupplierId" column="gb_dg_gb_supplier_id"/>
		<result property="gbDgGoodsStandardWeight" column="gb_dg_goods_standard_weight"/>
		<result property="gbDgGoodsStatus" column="gb_dg_goods_status"/>
		<result property="gbDgGoodsType" column="gb_dg_goods_type"/>
		<result property="gbDgGbDepartmentId" column="gb_dg_gb_department_id"/>
		<result property="gbDgGbSupplierId" column="gb_dg_gb_supplier_id"/>
		<result property="gbDgNxDistributerId" column="gb_dg_nx_distributer_id"/>
		<result property="gbDgNxDistributerGoodsId" column="gb_dg_nx_distributer_goods_id"/>
		<result property="gbDgGoodsPrice" column="gb_dg_goods_price"/>
		<result property="gbDgGoodsLowestPrice" column="gb_dg_goods_lowest_price"/>
		<result property="gbDgGoodsHighestPrice" column="gb_dg_goods_highest_price"/>
		<result property="gbDgControlPrice" column="gb_dg_control_price"/>
		<result property="gbDgControlFresh" column="gb_dg_control_fresh"/>
		<result property="gbDgFreshWarnHour" column="gb_dg_fresh_warn_hour"/>
		<result property="gbDgFreshWasteHour" column="gb_dg_fresh_waste_hour"/>
		<result property="gbDgGoodsInventoryType" column="gb_dg_goods_inventory_type"/>
		<result property="gbDgGoodsType" column="gb_dg_goods_type"/>
		<result property="gbDgGbSupplierId" column="gb_dg_gb_supplier_id"/>
		<result property="gbDgIsFranchisePrice" column="gb_dg_is_franchise_price"/>
		<result property="gbDgFranchisePriceOne" column="gb_dg_franchise_price_one"/>
		<result property="gbDgFranchisePriceOneUpdate" column="gb_dg_franchise_price_one_update"/>
		<result property="gbDgFranchisePriceTwo" column="gb_dg_franchise_price_two"/>
		<result property="gbDgFranchisePriceTwoUpdate" column="gb_dg_franchise_price_two_update"/>
		<result property="gbDgFranchisePriceThree" column="gb_dg_franchise_price_three"/>
		<result property="gbDgFranchisePriceThreeUpdate" column="gb_dg_franchise_price_three_update"/>
		<result property="gbDgIsSelfControl" column="gb_dg_is_self_control"/>
		<result property="gbDgSelfPrice" column="gb_dg_self_price"/>
		<association property="gbDepartmentDisGoodsEntity" resultMap="depGoods"/>
		<collection property="gbDepartmentOrdersEntities" resultMap="orders"/>
		<collection property="gbDistributerStandardEntities" resultMap="disStandards"/>

	</resultMap>

	<resultMap id="shelfGoods" type="GbDistributerGoodsShelfGoodsEntity">
		<id property="gbDistributerGoodsShelfGoodsId" column="gb_distributer_goods_shelf_goods_id"/>
		<result property="gbDgsgDisGoodsId" column="gb_DGSG_dis_goods_id"/>
		<result property="gbDgsgShelfId" column="gb_DGSG_shelf_id"/>
		<result property="gbDgsgSort" column="gb_DGSG_sort"/>
		<association property="gbDistributerGoodsEntity" resultMap="disGoodsWithOrders"/>
		<collection property="gbDepartmentDisGoodsEntity" resultMap="depGoods"/>
		<collection property="gbDepartmentGoodsStockEntities" resultMap="depStock"/>
	</resultMap>
	<resultMap id="shelfGoodsWithPurOrder" type="GbDistributerGoodsShelfGoodsEntity">
		<id property="gbDistributerGoodsShelfGoodsId" column="gb_distributer_goods_shelf_goods_id"/>
		<result property="gbDgsgDisGoodsId" column="gb_DGSG_dis_goods_id"/>
		<result property="gbDgsgShelfId" column="gb_DGSG_shelf_id"/>
		<result property="gbDgsgSort" column="gb_DGSG_sort"/>
		<association property="gbDistributerGoodsEntity" resultMap="disGoods"/>
		<collection property="gbDepartmentDisGoodsEntity" resultMap="depGoods"/>
		<collection property="gbDepartmentGoodsStockEntities" resultMap="depStock"/>
	</resultMap>

	<resultMap id="shelfDetailWithOrder" type="GbDistributerGoodsShelfEntity">
		<id property="gbDistributerGoodsShelfId" column="gb_distributer_goods_shelf_id"/>
		<result property="gbDistributerGoodsShelfName" column="gb_distributer_goods_shelf_name"/>
		<result property="gbDistributerGoodsShelfDisId" column="gb_distributer_goods_shelf_dis_id"/>
		<result property="gbDistributerGoodsShelfSort" column="gb_distributer_goods_shelf_sort"/>
		<collection property="gbDisGoodsShelfGoodsEntities" resultMap="shelfGoods"/>
	</resultMap>

	<resultMap id="shelfDetailWithPurOrder" type="GbDistributerGoodsShelfEntity">
		<id property="gbDistributerGoodsShelfId" column="gb_distributer_goods_shelf_id"/>
		<result property="gbDistributerGoodsShelfName" column="gb_distributer_goods_shelf_name"/>
		<result property="gbDistributerGoodsShelfDisId" column="gb_distributer_goods_shelf_dis_id"/>
		<result property="gbDistributerGoodsShelfSort" column="gb_distributer_goods_shelf_sort"/>
		<collection property="gbDisGoodsShelfGoodsEntities" resultMap="shelfGoodsWithPurOrder"/>
	</resultMap>
	<resultMap id="shelfJustGoods" type="GbDistributerGoodsShelfGoodsEntity">
		<id property="gbDistributerGoodsShelfGoodsId" column="gb_distributer_goods_shelf_goods_id"/>
		<result property="gbDgsgDisGoodsId" column="gb_DGSG_dis_goods_id"/>
		<result property="gbDgsgShelfId" column="gb_DGSG_shelf_id"/>
		<result property="gbDgsgSort" column="gb_DGSG_sort"/>
		<association property="gbDistributerGoodsEntity" resultMap="disGoodsWithDepGoods"/>
	</resultMap>
	<resultMap id="shelf" type="GbDistributerGoodsShelfEntity">
		<id property="gbDistributerGoodsShelfId" column="gb_distributer_goods_shelf_id"/>
		<result property="gbDistributerGoodsShelfName" column="gb_distributer_goods_shelf_name"/>
		<result property="gbDistributerGoodsShelfDisId" column="gb_distributer_goods_shelf_dis_id"/>
		<result property="gbDistributerGoodsShelfSort" column="gb_distributer_goods_shelf_sort"/>
		<collection property="gbDisGoodsShelfGoodsEntities" resultMap="shelfJustGoods"/>
	</resultMap>
	<select id="queryShelfGoodsByParams" resultMap="shelf">
		select * from gb_distributer_goods_shelf as gs
		left join gb_distributer_goods_shelf_goods as gsg on gsg.gb_DGSG_shelf_id = gs.gb_distributer_goods_shelf_id
		left join gb_distributer_goods as dg on dg.gb_distributer_goods_id = gsg.gb_DGSG_dis_goods_id
		<where>
			<if test="shelfId !=null">
				and gb_distributer_goods_shelf_id = #{shelfId}
			</if>
			<if test="disId != null">
				and gb_distributer_goods_shelf_dis_id = #{disId}
			</if>
		</where>
		order by gb_distributer_goods_shelf_sort, gsg.gb_DGSG_sort
	</select>

	<resultMap id="fatherDepartment" type="GbDepartmentEntity">
		<id property="gbDepartmentId" column="dd_gb_department_id"/>
		<result property="gbDepartmentName" column="dd_gb_department_name"/>
		<result property="gbDepartmentType" column="dd_gb_department_type"/>
		<result property="gbDepartmentSettleType" column="dd_gb_department_settle_type"/>
		<result property="gbDepartmentFilePath" column="dd_gb_department_file_path"/>
		<result property="gbDepartmentFatherId" column="dd_gb_department_father_id"/>
		<result property="gbDepartmentIsGroupDep" column="dd_gb_department_is_group_dep"/>
	</resultMap>

	<resultMap id="orderDepartment" type="GbDepartmentEntity">
		<id property="gbDepartmentId" column="gb_department_id"/>
		<result property="gbDepartmentNamePy" column="gb_department_name_py"/>
		<result property="gbDepartmentName" column="gb_department_name"/>
		<result property="gbDepartmentType" column="gb_department_type"/>
		<result property="gbDepartmentSettleType" column="gb_department_settle_type"/>
		<result property="gbDepartmentFatherId" column="gb_department_father_id"/>
		<result property="gbDepartmentFilePath" column="gb_department_file_path"/>
		<result property="gbDepartmentIsGroupDep" column="gb_department_is_group_dep"/>
		<result property="gbDepartmentLevel" column="gb_department_level"/>
		<association property="fatherGbDepartmentEntity" resultMap="fatherDepartment"/>
	</resultMap>

	<resultMap id="orderUser" type="GbDepartmentUserEntity">
		<id property="gbDepartmentUserId" column="gb_department_user_id"/>
		<result property="gbDuLoginTimes" column="gb_DU_login_times"/>
		<result property="gbDuCustomerService" column="gb_DU_customer_service"/>
		<result property="gbDuWxNickName" column="gb_DU_wx_nick_name"/>
		<result property="gbDuWxAvartraUrl" column="gb_DU_wx_avartra_url"/>
		<result property="gbDuUrlChange" column="gb_DU_url_change"/>
		<result property="gbDuPrintDeviceId" column="gb_DU_print_device_id"/>
		<result property="gbDuPrintBillDeviceId" column="gb_DU_print_bill_device_id"/>
	</resultMap>

	<resultMap id="orderDepDisGoods" type="GbDepartmentDisGoodsEntity">
        <id property="gbDepartmentDisGoodsId" column="gb_department_dis_goods_id"/>
        <result property="gbDdgGbDisId" column="gb_DDG_gb_dis_id"/>

		<result property="gbDdgDepGoodsName" column="gb_DDG_dep_goods_name"/>
		<result property="gbDdgDepGoodsStandardname" column="gb_DDG_dep_goods_standardname"/>
		<result property="gbDdgDepartmentId" column="gb_DDG_department_id"/>
		<result property="gbDdgNxDistributerId" column="gb_DDG_nx_distributer_id"/>
		<result property="gbDdgNxDistributerGoodsId" column="gb_DDG_nx_distributer_goods_id"/>
		<result property="gbDdgGbDepartmentId" column="gb_DDG_gb_department_id"/>
		<result property="gbDdgInventoryFullTime" column="gb_DDG_inventory_full_time"/>
		<result property="gbDdgStockTotalSubtotal" column="gb_DDG_stock_total_subtotal"/>
		<result property="gbDdgStockTotalWeight" column="gb_DDG_stock_total_weight"/>
		<result property="gbDdgShowStandardId" column="gb_DDG_show_standard_id"/>
		<result property="gbDdgShowStandardName" column="gb_DDG_show_standard_name"/>
		<result property="gbDdgShowStandardName" column="gb_DDG_show_standard_name"/>
		<result property="gbDdgShowStandardScale" column="gb_DDG_show_standard_scale"/>
		<result property="gbDdgSellingPrice" column="gb_DDG_selling_price"/>
		<result property="gbDdgOrderDate" column="gb_DDG_order_date"/>
		<result property="gbDdgOrderPrice" column="gb_DDG_order_price"/>
		<result property="gbDdgOrderQuantity" column="gb_DDG_order_quantity"/>
		<result property="gbDdgOrderRemark" column="gb_DDG_order_remark"/>
		<result property="gbDdgOrderStandard" column="gb_DDG_order_standard"/>
		<result property="gbDdgOrderWeight" column="gb_DDG_order_weight"/>
	</resultMap>
	<resultMap id="orders" type="GbDepartmentOrdersEntity">
		<id property="gbDepartmentOrdersId" column="gb_department_orders_id"/>
        <result property="gbDoSellingPrice" column="gb_DO_selling_price"/>
        <result property="gbDoSellingSubtotal" column="gb_DO_selling_subtotal"/>
		<result property="gbDoNxGoodsId" column="gb_DO_gb_goods_id"/>
		<result property="gbDoOrderUserId" column="gb_DO_order_user_id"/>
		<result property="gbDoApplyDate" column="gb_DO_apply_date"/>
		<result property="gbDoApplyOnlyTime" column="gb_DO_apply_only_time"/>
		<result property="gbDoApplyFullTime" column="gb_DO_apply_full_time"/>
		<result property="gbDoArriveOnlyDate" column="gb_DO_arrive_only_date"/>
		<result property="gbDoArriveDate" column="gb_DO_arrive_date"/>
		<result property="gbDoArriveWhatDay" column="gb_DO_arrive_what_day"/>
		<result property="gbDoQuantity" column="gb_DO_quantity"/>
		<result property="gbDoStandard" column="gb_DO_standard"/>
		<result property="gbDoDsStandardScale" column="gb_DO_ds_standard_scale"/>
		<result property="gbDoDsStandardId" column="gb_DO_ds_standard_id"/>
		<result property="gbDoRemark" column="gb_DO_remark"/>
		<result property="gbDoStatus" column="gb_DO_status"/>
		<result property="gbDoWeight" column="gb_DO_weight"/>
		<result property="gbDoScaleWeight" column="gb_DO_scale_weight"/>
		<result property="gbDoScalePrice" column="gb_DO_scale_price"/>
		<result property="gbDoPrice" column="gb_DO_price"/>
		<result property="gbDoSubtotal" column="gb_DO_subtotal"/>
		<result property="gbDoBuyStatus" column="gb_DO_buy_status"/>
		<result property="gbDoNxGoodsFatherId" column="gb_DO_gb_goods_father_id"/>
		<result property="gbDoDepartmentFatherId" column="gb_DO_department_father_id"/>
		<result property="gbDoDisGoodsId" column="gb_DO_dis_goods_id"/>
		<result property="gbDoDisGoodsFatherId" column="gb_DO_dis_goods_father_id"/>
		<result property="gbDoDepDisGoodsId" column="gb_DO_dep_dis_goods_id"/>
		<result property="gbDoDepartmentId" column="gb_DO_department_id"/>
		<result property="gbDoDistributerId" column="gb_DO_distributer_id"/>
		<result property="gbDoBuyStatus" column="gb_DO_buy_status"/>
        <result property="gbDoGoodsType" column="gb_DO_goods_type"/>
        <result property="gbDoDgsrReturnId" column="gb_DO_dgsr_return_id"/>
		<result property="gbDoOperationTime" column="gb_DO_operation_time"/>
		<result property="gbDoIsAgent" column="gb_DO_is_agent"/>
		<result property="gbDoPurchaseGoodsId" column="gb_DO_purchase_goods_id"/>
		<result property="gbDoDepDisGoodsId" column="gb_DO_dep_dis_goods_id"/>
		<result property="gbDoDisGoodsFatherId" column="gb_DO_dis_goods_father_id"/>
		<result property="gbDoToDepartmentId" column="gb_DO_to_department_id"/>
		<result property="gbDoOrderType" column="gb_DO_order_type"/>
		<result property="gbDoBillId" column="gb_DO_bill_id"/>
		<result property="gbDoReceiveUserId" column="gb_DO_return_user_id"/>
		<result property="gbDoPurchaseUserId" column="gb_DO_purchase_user_id"/>
		<result property="gbDoWeightTotalId" column="gb_DO_weight_total_id"/>
		<result property="gbDoWeightGoodsId" column="gb_DO_weight_goods_id"/>
		<result property="gbDoPriceDifferent" column="gb_DO_price_different"/>
		<association property="gbDepartmentUserEntity" resultMap="orderUser"/>
		<association property="gbDepartmentEntity" resultMap="orderDepartment"/>
	</resultMap>

	<resultMap id="purGoodsDep" type="NxDepartmentEntity">
		<id property="nxDepartmentId" column="purDs_gb_department_id"/>
		<result property="nxDepartmentName" column="purDs_gb_department_name"/>
		<association property="fatherDepartmentEntity" resultMap="purGoodsFatherDep"/>
	</resultMap>

	<resultMap id="purGoodsFatherDep" type="NxDepartmentEntity">
		<id property="nxDepartmentId" column="purDf_gb_department_id"/>
		<result property="nxDepartmentName" column="purDf_gb_department_name"/>
	</resultMap>
	<resultMap id="depsOrders" type="GbDepartmentOrdersEntity">
		<id property="gbDepartmentOrdersId" column="gb_department_orders_id"/>
        <result property="gbDoSellingPrice" column="gb_DO_selling_price"/>
        <result property="gbDoSellingSubtotal" column="gb_DO_selling_subtotal"/>
		<result property="gbDoNxGoodsId" column="gb_DO_gb_goods_id"/>
		<result property="gbDoOrderUserId" column="gb_DO_order_user_id"/>
		<result property="gbDoApplyDate" column="gb_DO_apply_date"/>
		<result property="gbDoApplyOnlyTime" column="gb_DO_apply_only_time"/>
		<result property="gbDoApplyFullTime" column="gb_DO_apply_full_time"/>
		<result property="gbDoArriveOnlyDate" column="gb_DO_arrive_only_date"/>
		<result property="gbDoArriveDate" column="gb_DO_arrive_date"/>
		<result property="gbDoArriveWhatDay" column="gb_DO_arrive_what_day"/>
		<result property="gbDoQuantity" column="gb_DO_quantity"/>
		<result property="gbDoStandard" column="gb_DO_standard"/>
		<result property="gbDoDsStandardScale" column="gb_DO_ds_standard_scale"/>
		<result property="gbDoDsStandardId" column="gb_DO_ds_standard_id"/>
		<result property="gbDoRemark" column="gb_DO_remark"/>
		<result property="gbDoStatus" column="gb_DO_status"/>
		<result property="gbDoWeight" column="gb_DO_weight"/>
		<result property="gbDoScaleWeight" column="gb_DO_scale_weight"/>
		<result property="gbDoScalePrice" column="gb_DO_scale_price"/>
		<result property="gbDoPrice" column="gb_DO_price"/>
		<result property="gbDoSubtotal" column="gb_DO_subtotal"/>
		<result property="gbDoBuyStatus" column="gb_DO_buy_status"/>
		<result property="gbDoNxGoodsFatherId" column="gb_DO_gb_goods_father_id"/>
		<result property="gbDoDepartmentFatherId" column="gb_DO_department_father_id"/>
		<result property="gbDoDisGoodsId" column="gb_DO_dis_goods_id"/>
		<result property="gbDoDisGoodsFatherId" column="gb_DO_dis_goods_father_id"/>
		<result property="gbDoDepDisGoodsId" column="gb_DO_dep_dis_goods_id"/>
		<result property="gbDoDepartmentId" column="gb_DO_department_id"/>
		<result property="gbDoDistributerId" column="gb_DO_distributer_id"/>
		<result property="gbDoBuyStatus" column="gb_DO_buy_status"/>
        <result property="gbDoGoodsType" column="gb_DO_goods_type"/>
        <result property="gbDoDgsrReturnId" column="gb_DO_dgsr_return_id"/>
		<result property="gbDoOperationTime" column="gb_DO_operation_time"/>
		<result property="gbDoIsAgent" column="gb_DO_is_agent"/>
		<result property="gbDoPurchaseGoodsId" column="gb_DO_purchase_goods_id"/>
		<result property="gbDoDepDisGoodsId" column="gb_DO_dep_dis_goods_id"/>
		<result property="gbDoOrderType" column="gb_DO_order_type"/>
		<result property="gbDoBillId" column="gb_DO_bill_id"/>
		<result property="gbDoPurchaseUserId" column="gb_DO_purchase_user_id"/>
		<result property="gbDoReceiveUserId" column="gb_DO_return_user_id"/>
		<result property="gbDoWeightTotalId" column="gb_DO_weight_total_id"/>
		<result property="gbDoWeightGoodsId" column="gb_DO_weight_goods_id"/>
		<result property="gbDoPriceDifferent" column="gb_DO_price_different"/>
	</resultMap>
	<resultMap id="purGoods" type="GbDistributerPurchaseGoodsEntity">

		<id property="gbDistributerPurchaseGoodsId" column="gb_distributer_purchase_goods_id"/>
		<result property="gbDpgPurchaseNxDistributerId" column="gb_DPG_purchase_nx_distributer_id"/>
        <result property="gbDpgOrdersFinishAmount" column="gb_DPG_orders_finish_amount"/>
		<result property="gbDpgWeightId" column="gb_DPG_weight_id"/>
		<result property="gbDpgDisGoodsId" column="gb_DPG_dis_goods_id"/>
		<result property="gbDpgDisGoodsFatherId" column="gb_DPG_dis_goods_father_id"/>
		<result property="gbDpgQuantity" column="gb_DPG_quantity"/>
		<result property="gbDpgStandard" column="gb_DPG_standard"/>
		<result property="gbDpgPurUserId" column="gb_DPG_pur_user_id"/>
		<result property="gbDpgStatus" column="gb_DPG_status"/>
		<result property="gbDpgBuyPrice" column="gb_DPG_buy_price"/>
		<result property="gbDpgBuyScalePrice" column="gb_Dpg_buy_scale_price"/>
		<result property="gbDpgBuyScaleQuantity" column="gb_Dpg_buy_scale_quantity"/>
		<result property="gbDpgBuySubtotal" column="gb_DPG_buy_subtotal"/>
		<result property="gbDpgBuyQuantity" column="gb_DPG_buy_quantity"/>
		<result property="gbDpgPurchaseType" column="gb_DPG_purchase_type"/>
		<result property="gbDpgPayType" column="gb_DPG_pay_type"/>
		<result property="gbDpgOrdersAmount" column="gb_DPG_orders_amount"/>
		<result property="gbDpgTypeAddUserId" column="gb_DPG_type_add_user_id"/>
		<result property="gbDpgInputType" column="gb_DPG_input_type"/>
		<result property="gbDpgTime" column="gb_DPG_time"/>
		<result property="gbDpgDistributerId" column="gb_DPG_distributer_id"/>
		<result property="gbDpgInputType" column="gb_DPG_input_type"/>
		<result property="gbDpgPurchaseType" column="gb_DPG_purchase_type"/>
		<result property="gbDpgPayType" column="gb_DPG_pay_type"/>
		<result property="gbDpgPurchaseFullTime" column="gb_DPG_purchase_full_time"/>
		<result property="gbDpgBuySubtotal" column="gb_DPG_buy_subtotal"/>
		<result property="gbDpgPurchaseMonth" column="gb_DPG_purchase_month"/>
		<result property="gbDpgPurchaseDate"  column="gb_DPG_purchase_date"/>
		<result property="gbDpgPurchaseYear" column="gb_DPG_purchase_year"/>
		<result property="gbDpgDisGoodsPriceId" column="gb_DPG_dis_goods_price_id"/>
		<result property="gbDpgPurUserId" column="gb_DPG_pur_user_id"/>
		<result property="gbDpgPurchaseDepartmentId" column="gb_DPG_purchase_department_id"/>
		<result property="gbDpgPurchaseWeek" column="gb_DPG_purchase_week"/>
		<result property="gbDpgPurchaseWeekYear" column="gb_DPG_purchase_week_year"/>
		<result property="gbDpgBatchId" column="gb_DPG_batch_id"/>
		<result property="gbDpgBuyScaleQuantity" column="gb_DPG_buy_scale_quantity"/>
		<result property="gbDpgBuyScale" column="gb_DPG_buy_scale"/>
		<result property="gbDpgBuyScalePrice" column="gb_DPG_buy_scale_price"/>
		<result property="gbDpgBuyPriceReason" column="gb_DPG_buy_price_reason"/>
		<result property="gbDpgWarnFullTime" column="gb_DPG_warn_full_time"/>
		<result property="gbDpgWasteFullTime" column="gb_DPG_waste_full_time"/>
		<collection property="gbDepartmentOrdersEntities" resultMap="depsOrders"/>
	</resultMap>

	<resultMap id="disGoodsWithOrders" type="GbDistributerGoodsEntity">
		<id property="gbDistributerGoodsId" column="gb_distributer_goods_id"/>
		<result property="gbDgGbDepartmentId" column="gb_dg_gb_department_id"/>
		<result property="gbDgGoodsIsHidden" column="gb_dg_goods_is_hidden"/>
		<result property="gbDgGoodsSonsSort" column="gb_dg_goods_sons_sort"/>
		<result property="gbDgSellingPrice" column="gb_dg_selling_price"/>
		<result property="gbDgGoodsName" column="gb_dg_goods_name"/>
		<result property="gbDgGoodsStandardname" column="gb_dg_goods_standardname"/>
		<result property="gbDgGoodsStandardWeight" column="gb_dg_goods_standard_weight"/>
		<result property="gbDgGoodsBrand" column="gb_dg_goods_brand"/>
		<result property="gbDgGoodsPlace" column="gb_dg_goods_place"/>
		<result property="gbDgGoodsIsWeight" column="gb_dg_goods_is_weight"/>
		<result property="gbDgGoodsDetail" column="gb_dg_goods_detail"/>
		<result property="gbDgGoodsPinyin" column="gb_dg_goods_pinyin"/>
		<result property="gbDgGoodsType" column="gb_dg_goods_type"/>
		<result property="gbDgGbDepartmentId" column="gb_dg_gb_department_id"/>
		<result property="gbDgGbSupplierId" column="gb_dg_gb_supplier_id"/>
		<result property="gbDgDfgGoodsFatherId" column="gb_dg_dfg_goods_father_id"/>
		<result property="gbDgGoodsPrice" column="gb_dg_goods_price"/>
		<result property="gbDgGoodsLowestPrice" column="gb_dg_goods_lowest_price"/>
		<result property="gbDgGoodsHighestPrice" column="gb_dg_goods_highest_price"/>
		<result property="gbDgControlPrice" column="gb_dg_control_price"/>
		<result property="gbDgControlFresh" column="gb_dg_control_fresh"/>
		<result property="gbDgFreshWarnHour" column="gb_dg_fresh_warn_hour"/>
		<result property="gbDgFreshWasteHour" column="gb_dg_fresh_waste_hour"/>
		<result property="gbDgGoodsInventoryType" column="gb_dg_goods_inventory_type"/>
		<result property="gbDgGbSupplierId" column="gb_dg_gb_supplier_id"/>
		<result property="gbDgIsFranchisePrice" column="gb_dg_is_franchise_price"/>
		<result property="gbDgFranchisePriceOne" column="gb_dg_franchise_price_one"/>
		<result property="gbDgFranchisePriceOneUpdate" column="gb_dg_franchise_price_one_update"/>
		<result property="gbDgFranchisePriceTwo" column="gb_dg_franchise_price_two"/>
		<result property="gbDgFranchisePriceTwoUpdate" column="gb_dg_franchise_price_two_update"/>
		<result property="gbDgFranchisePriceThree" column="gb_dg_franchise_price_three"/>
		<result property="gbDgFranchisePriceThreeUpdate" column="gb_dg_franchise_price_three_update"/>
		<result property="gbDgIsSelfControl" column="gb_dg_is_self_control"/>
		<result property="gbDgSelfPrice" column="gb_dg_self_price"/>
		<association property="gbDepartmentOrdersEntity" resultMap="depsOrders"/>
		<collection property="unPurDisGoodsList" resultMap="purGoods"/>

<!--		<collection property="gbDepartmentOrdersEntities" resultMap="orders"/>-->
	</resultMap>

	<resultMap id="depStock" type="GbDepartmentGoodsStockEntity">

        <id property="gbDepartmentGoodsStockId" column="gb_department_goods_stock_id"/>
        <result property="gbDgsProduceSellingSubtotal" column="gb_dgs_produce_selling_subtotal"/>
		<result property="gbDgsNxDistributerId" column="gb_dgs_nx_distributer_id"/>
		<result property="gbDgsSellingPrice" column="gb_dgs_selling_price"/>
		<result property="gbDgsSellingSubtotal" column="gb_dgs_selling_subtotal"/>
		<result property="gbDgsAfterProfitSubtotal" column="gb_dgs_after_profit_subtotal"/>
		<result property="gbDgsSellingPrice" column="gb_dgs_selling_price"/>
		<result property="gbDgsSellingSubtotal" column="gb_dgs_selling_subtotal"/>
		<result property="gbDgsBetweenPrice" column="gb_dgs_between_price"/>
		<result property="gbDgsProfitWeight" column="gb_dgs_profit_weight"/>
		<result property="gbDgsProfitWeight" column="gb_dgs_profit_weight"/>
		<result property="gbDgsProfitSubtotal" column="gb_dgs_profit_subtotal"/>
		<result property="gbDgsRestWeightShowStandard" column="gb_dgs_rest_weight_show_standard"/>
		<result property="gbDgsRestWeightShowStandardName" column="gb_dgs_rest_weight_show_standard_name"/>
		<result property="gbDgsGbDisGoodsId" column="gb_dgs_gb_dis_goods_id"/>
		<result property="gbDgsGbDisGoodsFatherId" column="gb_dgs_gb_dis_goods_father_id"/>
		<result property="gbDgsGbDepDisGoodsId" column="gb_dgs_gb_dep_dis_goods_id"/>
		<result property="gbDgsGbDistributerId" column="gb_dgs_gb_distributer_id"/>
		<result property="gbDgsPrice" column="gb_dgs_price"/>
		<result property="gbDgsWeight" column="gb_dgs_weight"/>
		<result property="gbDgsSubtotal" column="gb_dgs_subtotal"/>
		<result property="gbDgsRestWeight" column="gb_dgs_rest_weight"/>
		<result property="gbDgsRestSubtotal" column="gb_dgs_rest_subtotal"/>
		<result property="gbDgsProduceWeight" column="gb_dgs_produce_weight"/>
		<result property="gbDgsProduceSubtotal" column="gb_dgs_produce_subtotal"/>
		<result property="gbDgsGbDepartmentId" column="gb_dgs_gb_department_id"/>
		<result property="gbDgsGbDepartmentFatherId" column="gb_dgs_gb_department_father_id"/>
		<result property="gbDgsStatus" column="gb_dgs_status"/>
		<result property="gbDgsReceiveUserId" column="gb_dgs_receive_user_id"/>
		<result property="gbDgsGbDistributerId" column="gb_dgs_gb_distributer_id"/>
		<result property="gbDgsGbGoodsStockId" column="gb_dgs_gb_goods_stock_id"/>
		<result property="gbDgsDate" column="gb_dgs_date"/>
		<result property="gbDgsWarnFullTime" column="gb_dgs_warn_full_time"/>
		<result property="gbDgsWasteFullTime" column="gb_dgs_waste_full_time"/>
		<result property="gbDgsFullTime" column="gb_dgs_full_time"/>
		<result property="gbDgsInventoryDate" column="gb_dgs_inventory_date"/>
		<result property="gbDgsInventoryWeek" column="gb_dgs_inventory_week"/>
		<result property="gbDgsInventoryMonth" column="gb_dgs_inventory_month"/>
		<result property="gbDgsDoWasteFullTime" column="gb_dgs_do_waste_full_time"/>
		<result property="gbDgsLossWeight" column="gb_dgs_loss_weight"/>
		<result property="gbDgsLossSubtotal" column="gb_dgs_loss_subtotal"/>
		<result property="gbDgsReturnWeight" column="gb_dgs_return_weight"/>
		<result property="gbDgsReturnSubtotal" column="gb_dgs_return_subtotal"/>
		<result property="gbDgsGbDepDisGoodsId" column="gb_dgs_gb_dep_dis_goods_id"/>
		<result property="gbDgsWarnTimeQuantumName" column="gb_dgs_warn_time_quantum_name"/>
		<result property="gbDgsWasteTimeQuantumName" column="gb_dgs_waste_time_quantum_name"/>
		<result property="gbDgsGbPurGoodsId" column="gb_dgs_gb_pur_goods_id"/>
		<result property="gbDgsGbPurGoodsId" column="gb_dgs_gb_pur_goods_id"/>
		<result property="gbDgsGbPriceGoodsId" column="gb_dgs_gb_price_goods_id"/>
	</resultMap>
	<resultMap id="inventoryGoods" type="GbDistributerGoodsEntity">
		<id property="gbDistributerGoodsId" column="gb_distributer_goods_id"/>
		<result property="gbDgGbDepartmentId" column="gb_dg_gb_department_id"/>
		<result property="gbDgGoodsIsHidden" column="gb_dg_goods_is_hidden"/>
		<result property="gbDgGoodsSonsSort" column="gb_dg_goods_sons_sort"/>
		<result property="gbDgSellingPrice" column="gb_dg_selling_price"/>
		<result property="gbDgGoodsName" column="gb_dg_goods_name"/>
		<result property="gbDgGoodsStandardname" column="gb_dg_goods_standardname"/>
		<result property="gbDgGoodsStandardWeight" column="gb_dg_goods_standard_weight"/>
		<result property="gbDgGoodsBrand" column="gb_dg_goods_brand"/>
		<result property="gbDgGoodsPlace" column="gb_dg_goods_place"/>
		<result property="gbDgGoodsIsWeight" column="gb_dg_goods_is_weight"/>
		<result property="gbDgGoodsDetail" column="gb_dg_goods_detail"/>
		<result property="gbDgGoodsPinyin" column="gb_dg_goods_pinyin"/>
		<result property="gbDgGoodsPrice" column="gb_dg_goods_price"/>
		<result property="gbDgGoodsLowestPrice" column="gb_dg_goods_lowest_price"/>
		<result property="gbDgGoodsHighestPrice" column="gb_dg_goods_highest_price"/>
		<result property="gbDgControlPrice" column="gb_dg_control_price"/>
		<result property="gbDgControlFresh" column="gb_dg_control_fresh"/>
		<result property="gbDgFreshWarnHour" column="gb_dg_fresh_warn_hour"/>
		<result property="gbDgFreshWasteHour" column="gb_dg_fresh_waste_hour"/>
		<result property="gbDgGoodsInventoryType" column="gb_dg_goods_inventory_type"/>
		<result property="gbDgGbSupplierId" column="gb_dg_gb_supplier_id"/>
		<result property="gbDgIsFranchisePrice" column="gb_dg_is_franchise_price"/>
		<result property="gbDgFranchisePriceOne" column="gb_dg_franchise_price_one"/>
		<result property="gbDgFranchisePriceOneUpdate" column="gb_dg_franchise_price_one_update"/>
		<result property="gbDgFranchisePriceTwo" column="gb_dg_franchise_price_two"/>
		<result property="gbDgFranchisePriceTwoUpdate" column="gb_dg_franchise_price_two_update"/>
		<result property="gbDgFranchisePriceThree" column="gb_dg_franchise_price_three"/>
		<result property="gbDgFranchisePriceThreeUpdate" column="gb_dg_franchise_price_three_update"/>
		<result property="gbDgIsSelfControl" column="gb_dg_is_self_control"/>
		<result property="gbDgSelfPrice" column="gb_dg_self_price"/>
		<collection property="gbDepartmentGoodsStockEntities" resultMap="depStock"/>
	</resultMap>


	<resultMap id="unPlanPurchaseOrdersDisFatherGoods" type="GbDistributerFatherGoodsEntity">
		<id property="gbDistributerFatherGoodsId" column="gb_distributer_father_goods_id"/>
		<result property="gbDfgFatherGoodsName" column="gb_dfg_father_goods_name"/>
		<collection property="gbDistributerGoodsEntities" resultMap="disGoodsWithOrders"/>
	</resultMap>


	<select id="stockRoomGetShelfGoodsGb" resultMap="unPlanPurchaseOrdersDisFatherGoods">

		select
		*
# 		dgsg.gb_distributer_goods_shelf_goods_id,
# 		dgsg.gb_DGSG_shelf_id,
# 		dgsg.gb_DGSG_dis_goods_id,
# 		dfg.gb_distributer_father_goods_id,
# 		dfg.gb_dfg_father_goods_name,
# 		dg.gb_distributer_goods_id,
# 		dg.gb_dg_goods_name,
# 		dg.gb_dg_goods_brand,
# 		dg.gb_dg_goods_detail,
# 		dg.gb_dg_goods_place,
# 		dg.gb_dg_goods_standardname,
# 		dg.gb_dg_goods_standard_weight,
# 		dg.gb_dg_goods_type,
# 		dg.gb_dg_gb_department_id,
# 		dg.gb_dg_dfg_goods_father_id,
# 		dpg.gb_distributer_purchase_goods_id,
# 		dpg.gb_DPG_dis_goods_id,
# 		dpg.gb_DPG_quantity,
# 		dpg.gb_DPG_status,
# 		dpg.gb_DPG_orders_amount,
# 		dpg.gb_DPG_time,
# 		dpg.gb_DPG_apply_date



		from gb_distributer_goods_shelf_goods as dgsg
		left join gb_distributer_goods as dg on dg.gb_distributer_goods_id = dgsg.gb_DGSG_dis_goods_id
		left join gb_distributer_father_goods as dfg on dfg.gb_distributer_father_goods_id = dg.gb_dg_dfg_goods_father_id
		left join gb_distributer_purchase_goods as dpg on dpg.gb_DPG_dis_goods_id = dg.gb_distributer_goods_id and dpg.gb_DPG_status = 0
		left join gb_department_orders as gdo on gdo.gb_DO_purchase_goods_id = dpg.gb_distributer_purchase_goods_id
		and dpg.gb_DPG_purchase_department_id = #{purDepId}
		<where>
			<if test="shelfId != null">
				and dgsg.gb_DGSG_shelf_id = #{shelfId}
			</if>
		</where>
		order by dgsg.gb_DGSG_sort
	</select>

    <select id="queryShelfInventoryGoodsByParams" resultMap="inventoryGoods">
		select * from gb_distributer_goods_shelf as gs
		left join gb_distributer_goods_shelf_goods as gsg on gsg.gb_DGSG_shelf_id = gs.gb_distributer_goods_shelf_id
		left join gb_distributer_goods as dg on dg.gb_distributer_goods_id = gsg.gb_DGSG_dis_goods_id
		left join gb_department_goods_stock as gdgs on gdgs.gb_dgs_gb_dis_goods_id = dg.gb_distributer_goods_id
		<where>
			<if test="shelfId !=null">
				and gb_distributer_goods_shelf_id = #{shelfId}
			</if>
			<if test="toDepId != null">
				and gdgs.gb_dgs_gb_department_id  = #{toDepId}
			</if>
			<if test="date != null">
				and gdgs.gb_dgs_inventory_date  &lt;= #{date}
			</if>
			<if test="week != null">
				and gdgs.gb_dgs_inventory_week  &lt;= #{week}
			</if>
			<if test="month != null">
				and gdgs.gb_dgs_inventory_month  &lt;= #{month}
			</if>
			<if test="date != null">
				and gdgs.gb_dgs_inventory_date  =  #{date}
			</if>
			<if test="equalWeek != null">
				and gdgs.gb_dgs_inventory_week  = #{equalWeek}
			</if>
			<if test="equalMonth != null">
				and gdgs.gb_dgs_inventory_month   = #{equalMonth}
			</if>
			<if test="dayuRestWeight != null">
				and gdgs.gb_dgs_rest_weight   &gt; #{dayuRestWeight}
			</if>
		</where>
		order by gb_distributer_goods_shelf_sort, gsg.gb_DGSG_sort, gdgs.gb_department_goods_stock_id
	</select>

	<select id="queryStockOrdersByParams" resultMap="shelfDetailWithOrder">
		select * from gb_department_orders as gdo
		    left join gb_department as gd on gd.gb_department_id = gdo.gb_DO_department_id
			left join gb_distributer_goods as gdg on gdg.gb_distributer_goods_id = gdo.gb_DO_dis_goods_id
		    left join gb_distributer_standard as gds on gds.gb_DS_dis_goods_id = gdg.gb_distributer_goods_id
		    left join gb_department_user as du on du.gb_department_user_id = gdo.gb_DO_order_user_id
			left join gb_distributer_goods_shelf_goods as gdgsg on gdgsg.gb_DGSG_dis_goods_id = gdg.gb_distributer_goods_id
			left join gb_distributer_goods_shelf as gdgs on gdgs.gb_distributer_goods_shelf_id = gdgsg.gb_DGSG_shelf_id
			left join gb_department_goods_stock  as gdgss on gdgss.gb_dgs_gb_dis_goods_id =  gdg.gb_distributer_goods_id
			                                                       and gdgss.gb_dgs_rest_weight &gt; 0
			                                                       and gdgss.gb_dgs_gb_department_father_id = #{toDepId}
		left join gb_department_dis_goods ddg on ddg.gb_DDG_dis_goods_id = gdg.gb_distributer_goods_id

		<where>
				<if test="depFatherId !=null">
					and gdo.gb_DO_department_father_id = #{depFatherId}
				</if>
				<if test="toDepId != null">
					and gdo.gb_DO_to_department_id = #{toDepId}
				</if>
				<if test="status != null">
					and gdo.gb_DO_status &lt; #{status}
				</if>
				<if test="dayuStatus != null">
					and gdo.gb_DO_status &gt; #{dayuStatus}
				</if>
				<if test="isSelf != null">
					and gdg.gb_dg_is_self_control = #{isSelf}
				</if>
				<if test="weightId != null">
					and gdo.gb_DO_weight_total_id = #{weightId}
				</if>
			<if test="weightGoodsId != null">
				and gdo.gb_DO_weight_goods_id = #{weightGoodsId}
			</if>
			</where>
			order by gb_distributer_goods_shelf_sort, gdgsg.gb_DGSG_sort,gd.gb_department_id, gdgss.gb_dgs_full_time
	</select>

	<resultMap id="fatherGoods" type="GbDistributerFatherGoodsEntity">
		<id property="gbDistributerFatherGoodsId" column="gb_distributer_father_goods_id"/>
		<result property="gbDfgFathersFatherId" column="gb_dfg_fathers_father_id"/>
		<result property="gbDfgFatherGoodsName" column="gb_dfg_father_goods_name"/>
		<collection property="gbDepartmentDisGoodsEntities" resultMap="depGoodsWithDisGoods"/>
	</resultMap>


	<resultMap id="depGoods" type="GbDepartmentDisGoodsEntity">
        <id property="gbDepartmentDisGoodsId" column="gb_department_dis_goods_id"/>
        <result property="gbDdgGbDisId" column="gb_DDG_gb_dis_id"/>
		<result property="gbDdgDisGoodsId" column="gb_DDG_dis_goods_id"/>
		<result property="gbDdgDisGoodsFatherId" column="gb_DDG_dis_goods_father_id"/>
		<result property="gbDdgDepGoodsName" column="gb_DDG_dep_goods_name"/>
		<result property="gbDdgDepGoodsStandardname" column="gb_DDG_dep_goods_standardname"/>
		<result property="gbDdgGoodsType" column="gb_DDG_goods_type"/>
		<result property="gbDdgDepartmentId" column="gb_DDG_department_id"/>
		<result property="gbDdgNxDistributerId" column="gb_DDG_nx_distributer_id"/>
		<result property="gbDdgNxDistributerGoodsId" column="gb_DDG_nx_distributer_goods_id"/>
		<result property="gbDdgGbDepartmentId" column="gb_DDG_gb_department_id"/>
		<result property="gbDdgGbSupplierId" column="gb_DDG_gb_supplier_id"/>
		<result property="gbDdgInventoryDate" column="gb_DDG_inventory_date"/>
		<result property="gbDdgInventoryFullTime" column="gb_DDG_inventory_full_time"/>
		<result property="gbDdgStockTotalSubtotal" column="gb_DDG_stock_total_subtotal"/>
		<result property="gbDdgStockTotalWeight" column="gb_DDG_stock_total_weight"/>
		<result property="gbDdgShowStandardId" column="gb_DDG_show_standard_id"/>
		<result property="gbDdgShowStandardName" column="gb_DDG_show_standard_name"/>
		<result property="gbDdgShowStandardName" column="gb_DDG_show_standard_name"/>
		<result property="gbDdgShowStandardScale" column="gb_DDG_show_standard_scale"/>
		<result property="gbDdgSellingPrice" column="gb_DDG_selling_price"/>
		<result property="gbDdgOrderDate" column="gb_DDG_order_date"/>
		<result property="gbDdgOrderPrice" column="gb_DDG_order_price"/>
		<result property="gbDdgOrderQuantity" column="gb_DDG_order_quantity"/>
		<result property="gbDdgOrderRemark" column="gb_DDG_order_remark"/>
		<result property="gbDdgOrderStandard" column="gb_DDG_order_standard"/>
		<result property="gbDdgOrderWeight" column="gb_DDG_order_weight"/>
<!--		<association property="gbDistributerGoodsEntity" resultMap="disGoods"/>-->
<!--		<collection property="gbDepartmentGoodsStockEntities" resultMap="depStock"/>-->
	</resultMap>

	<resultMap id="depGoodsWithDisGoods" type="GbDepartmentDisGoodsEntity">
		<id property="gbDepartmentDisGoodsId" column="gb_department_dis_goods_id"/>
		<result property="gbDdgGbDisId" column="gb_DDG_gb_dis_id"/>
		<result property="gbDdgDisGoodsId" column="gb_DDG_dis_goods_id"/>
		<result property="gbDdgDisGoodsFatherId" column="gb_DDG_dis_goods_father_id"/>
		<result property="gbDdgDepGoodsName" column="gb_DDG_dep_goods_name"/>
		<result property="gbDdgDepGoodsStandardname" column="gb_DDG_dep_goods_standardname"/>
		<result property="gbDdgGoodsType" column="gb_DDG_goods_type"/>
		<result property="gbDdgDepartmentId" column="gb_DDG_department_id"/>
		<result property="gbDdgNxDistributerId" column="gb_DDG_nx_distributer_id"/>
		<result property="gbDdgNxDistributerGoodsId" column="gb_DDG_nx_distributer_goods_id"/>
		<result property="gbDdgGbDepartmentId" column="gb_DDG_gb_department_id"/>
		<result property="gbDdgGbSupplierId" column="gb_DDG_gb_supplier_id"/>
		<result property="gbDdgInventoryDate" column="gb_DDG_inventory_date"/>
		<result property="gbDdgInventoryFullTime" column="gb_DDG_inventory_full_time"/>
		<result property="gbDdgStockTotalSubtotal" column="gb_DDG_stock_total_subtotal"/>
		<result property="gbDdgStockTotalWeight" column="gb_DDG_stock_total_weight"/>
		<result property="gbDdgShowStandardId" column="gb_DDG_show_standard_id"/>
		<result property="gbDdgShowStandardName" column="gb_DDG_show_standard_name"/>
		<result property="gbDdgShowStandardName" column="gb_DDG_show_standard_name"/>
		<result property="gbDdgShowStandardScale" column="gb_DDG_show_standard_scale"/>
		<result property="gbDdgSellingPrice" column="gb_DDG_selling_price"/>
		<result property="gbDdgOrderDate" column="gb_DDG_order_date"/>
		<result property="gbDdgOrderPrice" column="gb_DDG_order_price"/>
		<result property="gbDdgOrderQuantity" column="gb_DDG_order_quantity"/>
		<result property="gbDdgOrderRemark" column="gb_DDG_order_remark"/>
		<result property="gbDdgOrderStandard" column="gb_DDG_order_standard"/>
		<result property="gbDdgOrderWeight" column="gb_DDG_order_weight"/>
		<association property="gbDistributerGoodsEntity" resultMap="disGoods"/>
		<collection property="gbDepartmentGoodsStockEntities" resultMap="depStock"/>
	</resultMap>

	<select id="queryShelfInventoryDepGoodsByParams" resultMap="fatherGoods">
		select * from gb_distributer_goods_shelf as gs
		left join gb_distributer_goods_shelf_goods as gsg on gsg.gb_DGSG_shelf_id = gs.gb_distributer_goods_shelf_id
		left join gb_distributer_goods as dg on dg.gb_distributer_goods_id = gsg.gb_DGSG_dis_goods_id
		left join gb_distributer_father_goods as gdfg on gdfg.gb_distributer_father_goods_id = dg.gb_dg_dfg_goods_father_id
		left join gb_department_goods_stock as gdgs on gdgs.gb_dgs_gb_dis_goods_id = dg.gb_distributer_goods_id
		left join gb_department_dis_goods as ddg on ddg.gb_department_dis_goods_id = gdgs.gb_dgs_gb_dep_dis_goods_id
		<where>
			<if test="shelfId !=null">
				and gb_distributer_goods_shelf_id = #{shelfId}
			</if>
			<if test="toDepId != null">
				and gdgs.gb_dgs_gb_department_id  = #{toDepId}
			</if>
			<if test="status != null">
				and gdgs.gb_dgs_status &gt; #{status}
			</if>
			<if test="inventoryType != null">
				and dg.gb_dg_goods_inventory_type  =  #{inventoryType}
			</if>
			<if test="stopDate != null">
				and gdgs.gb_dgs_inventory_date  &lt;= #{stopDate}
			</if>
			<if test="week != null">
				and gdgs.gb_dgs_inventory_week  &lt;= #{week}
			</if>
			<if test="month != null">
				and gdgs.gb_dgs_inventory_month  &lt;= #{month}
			</if>
			<if test="date != null">
				and gdgs.gb_dgs_inventory_date  =  #{date}
			</if>
			<if test="equalWeek != null">
				and gdgs.gb_dgs_inventory_week  = #{equalWeek}
			</if>
			<if test="equalMonth != null">
				and gdgs.gb_dgs_inventory_month   = #{equalMonth}
			</if>
			<if test="dayuRestWeight != null">
				and gdgs.gb_dgs_rest_weight   &gt; #{dayuRestWeight}
			</if>
		</where>
		order by gb_distributer_goods_shelf_sort, gsg.gb_DGSG_sort, gdgs.gb_department_goods_stock_id
	</select>
	<select id="queryShelfList" resultType="com.nongxinle.entity.GbDistributerGoodsShelfEntity">
		select * from gb_distributer_goods_shelf
		<where>
			<if test="depId != null">
				and gb_distributer_goods_shelf_dep_id = #{depId}
			</if>
			<if test="dayuSort != null">
				and gb_distributer_goods_shelf_sort &gt; #{dayuSort}
			</if>
		</where>

          order by gb_distributer_goods_shelf_sort
	</select>
	<select id="queryShelfGoodsWithPurOrder" resultMap="shelfDetailWithPurOrder">
		select * from   gb_department_orders as gdo
		left join gb_department as gd on gd.gb_department_id = gdo.gb_DO_department_id
		left join gb_distributer_goods as gdg on gdg.gb_distributer_goods_id = gdo.gb_DO_dis_goods_id
		left join gb_distributer_standard as gds on gds.gb_DS_dis_goods_id = gdg.gb_distributer_goods_id
		left join gb_department_user as du on du.gb_department_user_id = gdo.gb_DO_order_user_id
		left join gb_distributer_goods_shelf_goods as gdgsg on gdgsg.gb_DGSG_dis_goods_id = gdg.gb_distributer_goods_id
		left join gb_distributer_goods_shelf as gdgs on gdgs.gb_distributer_goods_shelf_id = gdgsg.gb_DGSG_shelf_id
		left join gb_department_goods_stock  as gdgss on gdgss.gb_dgs_gb_dis_goods_id =  gdg.gb_distributer_goods_id
		and gdgss.gb_dgs_rest_weight &gt; 0
		and gdgss.gb_dgs_gb_department_father_id = #{toDepId}
		left join gb_department_dis_goods ddg on ddg.gb_DDG_dis_goods_id = gdg.gb_distributer_goods_id

		<where>
			<if test="depFatherId !=null">
				and gdo.gb_DO_department_father_id = #{depFatherId}
			</if>
			<if test="toDepId != null">
				and gdo.gb_DO_to_department_id = #{toDepId}
			</if>
			<if test="status != null">
				and gdo.gb_DO_status &lt; #{status}
			</if>
			<if test="dayuStatus != null">
				and gdo.gb_DO_status &gt; #{dayuStatus}
			</if>
			<if test="isSelf != null">
				and gdg.gb_dg_is_self_control = #{isSelf}
			</if>
			<if test="weightId != null">
				and gdo.gb_DO_weight_total_id = #{weightId}
			</if>
			<if test="weightGoodsId != null">
				and gdo.gb_DO_weight_goods_id = #{weightGoodsId}
			</if>
		</where>
		order by gb_distributer_goods_shelf_sort, gdgsg.gb_DGSG_sort,gd.gb_department_id, gdgss.gb_dgs_full_time

	</select>
	<select id="queryStockOrdersByParamsWithOrder" resultMap="shelf">

		select * from gb_department_orders as gdo
		left join gb_department as gd on gd.gb_department_id = gdo.gb_DO_department_id
		left join gb_distributer_goods as gdg on gdg.gb_distributer_goods_id = gdo.gb_DO_dis_goods_id
		left join gb_distributer_standard as gds on gds.gb_DS_dis_goods_id = gdg.gb_distributer_goods_id
		left join gb_department_user as du on du.gb_department_user_id = gdo.gb_DO_order_user_id
		left join gb_distributer_goods_shelf_goods as gdgsg on gdgsg.gb_DGSG_dis_goods_id = gdg.gb_distributer_goods_id
		left join gb_distributer_goods_shelf as gdgs on gdgs.gb_distributer_goods_shelf_id = gdgsg.gb_DGSG_shelf_id
		left join gb_department_goods_stock  as gdgss on gdgss.gb_dgs_gb_dis_goods_id =  gdg.gb_distributer_goods_id
		and gdgss.gb_dgs_rest_weight &gt; 0
		and gdgss.gb_dgs_gb_department_father_id = #{toDepId}
		left join gb_department_dis_goods ddg on ddg.gb_DDG_dis_goods_id = gdg.gb_distributer_goods_id

		<where>
			<if test="depFatherId !=null">
				and gdo.gb_DO_department_father_id = #{depFatherId}
			</if>
			<if test="toDepId != null">
				and gdo.gb_DO_to_department_id = #{toDepId}
			</if>
			<if test="status != null">
				and gdo.gb_DO_status &lt; #{status}
			</if>
			<if test="dayuStatus != null">
				and gdo.gb_DO_status &gt; #{dayuStatus}
			</if>
			<if test="isSelf != null">
				and gdg.gb_dg_is_self_control = #{isSelf}
			</if>
			<if test="weightId != null">
				and gdo.gb_DO_weight_total_id = #{weightId}
			</if>
			<if test="weightGoodsId != null">
				and gdo.gb_DO_weight_goods_id = #{weightGoodsId}
			</if>
		</where>
		order by gb_distributer_goods_shelf_sort, gdgsg.gb_DGSG_sort,gd.gb_department_id, gdgss.gb_dgs_full_time

	</select>


	<insert id="save" parameterType="com.nongxinle.entity.GbDistributerGoodsShelfEntity"
	useGeneratedKeys="true" keyProperty="gbDistributerGoodsShelfId">
		insert into gb_distributer_goods_shelf
		(
			`gb_distributer_goods_shelf_id`, 
			`gb_distributer_goods_shelf_name`, 
			`gb_distributer_goods_shelf_sort`, 
			`gb_distributer_goods_shelf_dis_id`,
		 	`gb_distributer_goods_shelf_dep_id`
		)
		values
		(
			#{gbDistributerGoodsShelfId}, 
			#{gbDistributerGoodsShelfName}, 
			#{gbDistributerGoodsShelfSort}, 
			#{gbDistributerGoodsShelfDisId},
		 	#{gbDistributerGoodsShelfDepId}
		)
	</insert>
	 
	<update id="update" parameterType="com.nongxinle.entity.GbDistributerGoodsShelfEntity">
		update gb_distributer_goods_shelf 
		<set>
			<if test="gbDistributerGoodsShelfName != null">`gb_distributer_goods_shelf_name` = #{gbDistributerGoodsShelfName}, </if>
			<if test="gbDistributerGoodsShelfSort != null">`gb_distributer_goods_shelf_sort` = #{gbDistributerGoodsShelfSort}, </if>
			<if test="gbDistributerGoodsShelfDepId != null">`gb_distributer_goods_shelf_dep_id` = #{gbDistributerGoodsShelfDepId}, </if>
			<if test="gbDistributerGoodsShelfDisId != null">`gb_distributer_goods_shelf_dis_id` = #{gbDistributerGoodsShelfDisId}</if>
		</set>
		where gb_distributer_goods_shelf_id = #{gbDistributerGoodsShelfId}
	</update>
	
	<delete id="delete">
		delete from gb_distributer_goods_shelf where gb_distributer_goods_shelf_id = #{value}
	</delete>
	
	<delete id="deleteBatch">
		delete from gb_distributer_goods_shelf where gb_distributer_goods_shelf_id in 
		<foreach item="gbDistributerGoodsShelfId" collection="array" open="(" separator="," close=")">
			#{gbDistributerGoodsShelfId}
		</foreach>
	</delete>

</mapper>